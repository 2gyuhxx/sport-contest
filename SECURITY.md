# 보안 가이드

## 프론트엔드 보안 설정

### ✅ 적용된 보안 조치

1. **소스맵 비활성화**
   - 프로덕션 빌드에서 소스맵을 생성하지 않아 원본 코드 경로가 노출되지 않습니다.

2. **디버깅 코드 제거**
   - 프로덕션 빌드에서 `console.log`, `console.error`, `debugger` 문이 자동으로 제거됩니다.

3. **코드 압축 및 난독화**
   - 코드를 압축하고 난독화하여 가독성을 낮춥니다.
   - 모든 주석이 제거됩니다.

4. **민감한 정보 보호**
   - API 키는 환경변수(`VITE_*`)로 관리되어 코드에 하드코딩되지 않습니다.
   - 하드코딩된 API 키나 fallback 값이 제거되었습니다.

5. **파일명 해시화**
   - 빌드된 파일명에 해시를 포함해 캐싱을 최적화하고 코드 분석을 어렵게 합니다.

## ⚠️ 중요 안내

### 프론트엔드 API 키 노출에 대해

**프론트엔드에서 사용하는 API 키는 클라이언트에 노출될 수밖에 없습니다.**

- 프론트엔드에서 사용하는 API 키(예: 네이버맵, 카카오맵)는 브라우저에서 실행되므로, 빌드된 번들에 포함되어 클라이언트에 노출됩니다.
- 이것은 정상적인 현상이며, 지도 API 등은 클라이언트에서 사용할 수 있도록 설계되었습니다.

**하지만:**
- 하드코딩은 피해야 합니다 (현재 모든 하드코딩 제거 완료)
- 환경변수로 관리해야 합니다 (`.env` 파일 사용)
- 서버 사이드에서만 사용해야 하는 민감한 키(예: JWT_SECRET, 데이터베이스 비밀번호)는 절대 프론트엔드에 포함되면 안 됩니다.

### 환경변수 관리

#### 프론트엔드 환경변수 (`.env`)
```bash
# API 엔드포인트
VITE_API_BASE_URL=https://wherehani.com/api

# 네이버맵 API (프론트엔드에서 사용)
VITE_NAVER_MAP_CLIENT_ID=your_client_id
VITE_NAVER_MAP_CLIENT_SECRET=your_client_secret
```

**주의:**
- `VITE_*`로 시작하는 환경변수는 빌드 시 번들에 포함됩니다.
- 이것은 클라이언트에 노출될 수 있으므로, 클라이언트에서 사용해야 하는 API 키만 여기에 포함해야 합니다.

#### 서버 환경변수 (`server/.env`)
```bash
# 데이터베이스 (절대 프론트엔드에 노출되면 안 됨)
DB_HOST=localhost
DB_USER=root
DB_PASSWORD=your_password

# JWT 시크릿 (절대 프론트엔드에 노출되면 안 됨)
JWT_SECRET=your_jwt_secret

# 소셜 로그인 (서버에서만 사용)
KAKAO_REST_API_KEY=your_kakao_key
GOOGLE_CLIENT_ID=your_google_id
GOOGLE_CLIENT_SECRET=your_google_secret
```

## 프로덕션 빌드

프로덕션 배포 시:

```bash
npm run build
```

빌드된 파일은 `dist` 폴더에 생성되며, 다음과 같이 최적화됩니다:
- 소스맵 제거
- 디버깅 코드 제거
- 코드 압축 및 난독화
- 파일명 해시화

## 추가 보안 권장사항

1. **HTTPS 강제**: 프로덕션 환경에서는 반드시 HTTPS를 사용하세요.
2. **CSP 헤더**: Content Security Policy 헤더를 설정하여 XSS 공격을 방지하세요.
3. **환경변수 분리**: 개발/스테이징/프로덕션 환경별로 환경변수를 분리 관리하세요.
4. **정기 업데이트**: 의존성 패키지를 정기적으로 업데이트하세요.

